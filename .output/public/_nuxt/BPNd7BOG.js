import{_ as R}from"./CfNxAj-D.js";import{_ as V}from"./BLRN7I0I.js";import{_ as z}from"./D_yz1VK7.js";import{_ as A}from"./BWVliGJj.js";import{_ as S}from"./CswkOXNq.js";import{_ as U}from"./Cb2pLvH4.js";import{d as I,u as C,c as q,o as r,m,h as s,w as t,b as h,i as f,t as g,v as l,F as x,A as E,y as _,g as j,j as D,k as H,l as L}from"./C1Qq1QLd.js";import{w as G,u as J}from"./CDSSNFII.js";import{g as K,a as M}from"./CGNRextM.js";import"./DnmWVJMN.js";import"./Dts3F0k1.js";import"./BkkHuSuh.js";import"./DlAUqK2U.js";import"./DWctDv8V.js";import"./dCmjBx8L.js";import"./KCR-tHi3.js";import"./BK4Bl150.js";import"./D3QtpRVU.js";import"./BsD3NFIs.js";import"./DKF2w7xO.js";const O=l("div",{class:"flex items-center justify-between"},null,-1),Q={class:"flex items-center"},W={key:0,class:"w-3","aria-hidden":"true"},be=I({__name:"index",async setup(X){let c,y;const{path:P}=C(),{data:b,error:Y}=([c,y]=G(()=>H(P,()=>J(L("os_projects",{fields:["id","name","due_date",{tasks:["id","name","status","due_date"]}],deep:{tasks:{_sort:["due_date"],_filter:{type:{_eq:"milestone"}}}}})),{})),c=await c,y(),c),T={pending:{label:"Pending",icon:"i-heroicons-clock-20-solid",color:"gray"},active:{label:"Active",icon:"i-heroicons-play-20-solid",color:"blue"},in_progress:{label:"In Progress",icon:"i-heroicons-wrench-screwdriver-20-solid",color:"amber"},in_review:{label:"In Review",icon:"i-heroicons-exclamation-circle-20-solid",color:"orange"},completed:{label:"Completed",icon:"i-heroicons-check-20-solid",color:"green"}},$=[{key:"name",label:"Name"},{key:"milestones",label:"Status"},{key:"due_date",label:"Target Date"},{key:"actions"}],B=q(()=>{var o;return b.value?(o=b.value)==null?void 0:o.map(n=>{const u=n.tasks;return{id:n.id,name:n.name,due_date:n.due_date,tasks:u.map(a=>({isComplete:a.status==="completed",isCurrent:a.status==="active"||a.status==="in_progress"||a.status==="in_review",icon:"i-heroicons-calendar",name:a.name,status:T[a.status??"pending"].label}))}}):[]});return(o,n)=>{const u=R,a=V,k=z,v=A,F=S,N=U;return r(),m("div",null,[s(u,{title:"Projects",breadcrumbs:[{title:"Portal",href:"/portal"},{title:"Projects"}]},{actions:t(()=>[]),_:1}),s(N,{class:"mt-6"},{header:t(()=>[O]),default:t(()=>[s(F,{columns:$,rows:h(B),"column-attribute":"label"},{"name-data":t(({row:e})=>[s(a,{variant:"link",to:`/portal/projects/${e.id}`,size:"xl",padded:!1},{default:t(()=>[f(g(e.name),1)]),_:2},1032,["to"])]),"due_date-data":t(({row:e})=>[s(k,{size:"xs"},{default:t(()=>[f(g(("getFriendlyDate"in o?o.getFriendlyDate:h(K))(e.due_date)),1)]),_:2},1024),s(k,{size:"xs","text-color":"light"},{default:t(()=>[f(g(("getRelativeTime"in o?o.getRelativeTime:h(M))(e.due_date)),1)]),_:2},1024)]),"milestones-data":t(({row:e})=>[l("ul",Q,[(r(!0),m(x,null,E(e.tasks,({isComplete:i,isCurrent:d,icon:w},p)=>(r(),m(x,{key:p},[l("li",{class:_([(p!==e.tasks.length-1,""),"relative"])},[l("div",{class:_([{"border-primary border-dashed h-10 w-10 border-2":d&&!i,"bg-primary w-5 h-5":i,"dark:border-gray-700 border-gray-300 border-2 w-5 h-5":!d&&!i},"relative flex items-center justify-center flex-shrink-0 rounded-card"])},[i?(r(),j(v,{key:0,name:"i-heroicons-check",class:"w-4 text-white"})):w&&d?(r(),j(v,{key:1,name:w,class:_(["fill-current",{"text-primary w-5 h-5":d}])},null,8,["name","class"])):D("",!0)],2)],2),p!==e.tasks.length-1?(r(),m("li",W,[l("div",{class:_(["h-0.5 w-full",[i?"bg-primary":"bg-gray-200 dark:bg-gray-700"]])},null,2)])):D("",!0)],64))),128))])]),"actions-data":t(({row:e})=>[s(a,{to:`/portal/projects/${e.id}`,color:"primary",variant:"outline",icon:"i-heroicons-arrow-right"},null,8,["to"])]),_:1},8,["rows"])]),_:1})])}}});export{be as default};
