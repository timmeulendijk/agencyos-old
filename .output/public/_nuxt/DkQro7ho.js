import{_ as F}from"./BLRN7I0I.js";import{_ as I}from"./BkkHuSuh.js";import{_ as b}from"./COtxFzAH.js";import{_ as V}from"./Cb2pLvH4.js";import{_ as B}from"./DbJPzKJT.js";import{d as D,D as q,o as i,m as f,h as a,w as n,i as U,b as s,v as _,a6 as M,S as R,F as y,c as k,A as $,g as w,t as S,j as T,a7 as j,a8 as z}from"./C1Qq1QLd.js";import{_ as A}from"./BWVliGJj.js";import{_ as L}from"./DnmWVJMN.js";import{_ as P}from"./BUQ8j0qe.js";import{w as E,u as C}from"./CDSSNFII.js";const H={class:"flex justify-end gap-x-4"},ie=D({__name:"FileUploadModal",props:{folderId:{}},setup(v){const e=q(!1);return(r,o)=>{const m=F,p=I,c=b,u=V,t=B;return i(),f(y,null,[a(m,{icon:"material-symbols:upload-file-outline",size:"lg",onClick:o[0]||(o[0]=l=>e.value=!s(e))},{default:n(()=>[U(" Upload Files ")]),_:1}),a(t,{modelValue:s(e),"onUpdate:modelValue":o[3]||(o[3]=l=>R(e)?e.value=l:null)},{default:n(()=>[a(u,null,{header:n(()=>[a(p,{content:"Upload File",size:"xs"})]),footer:n(()=>[_("div",H,[a(m,{color:"primary",onClick:o[2]||(o[2]=l=>e.value=!1)},{default:n(()=>[U("Done")]),_:1})])]),default:n(()=>[a(c,{"folder-id":r.folderId,multiple:"",onSuccess:o[1]||(o[1]=()=>{e.value=!1,("refreshNuxtData"in r?r.refreshNuxtData:s(M))("folder-detail-"+r.folderId)})},null,8,["folder-id"])]),_:1})]),_:1},8,["modelValue"])],64)}}}),G={class:"flex flex-col gap-6"},J={key:0},K={class:"grid gap-6 md:grid-cols-4"},O={class:"flex gap-2"},Q={class:"text-sm truncate"},W={class:""},X={class:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},de=D({__name:"FilesView",props:{folderId:{}},async setup(v){let e,r;const o=v;async function m(t={}){try{const l=C(j({fields:["*"],filter:{}})),g=C(z({fields:["*"],filter:{folder:{_eq:t.folderId}}})),[h,x]=await Promise.all([l,g]);return{folders:h,files:x}}catch{return null}}const p=([e,r]=E(()=>m(o)),e=await e,r(),e),c=k(()=>{var t;return(t=s(p))==null?void 0:t.folders}),u=k(()=>{var t;return(t=s(p))==null?void 0:t.files});return(t,l)=>{const g=A,h=V,x=L,N=P;return i(),f("div",G,[s(c)&&s(c).length>0?(i(),f("section",J,[_("div",K,[(i(!0),f(y,null,$(s(c),d=>(i(),w(x,{key:d.id,href:`/portal/files/folders/${d.id}`},{default:n(()=>[a(h,{class:"h-full",ui:{strategy:"merge",ring:"hover:ring-primary dark:hover:ring-primary",body:{base:"h-full flex flex-col",padding:"p-4 md:p-4"}}},{default:n(()=>[_("div",O,[a(g,{name:"material-symbols:folder",class:"w-6 h-6 text-gray-500"}),_("p",Q,S(d.name),1)])]),_:2},1024)]),_:2},1032,["href"]))),128))])])):T("",!0),_("section",W,[_("div",X,[(i(!0),f(y,null,$(s(u),d=>(i(),w(N,{key:d.id,file:d},null,8,["file"]))),128))])])])}}});export{ie as _,de as a};
