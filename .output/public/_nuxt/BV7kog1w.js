import{_ as H}from"./CldTFEN_.js";import{_ as N}from"./BkkHuSuh.js";import{_ as U}from"./CzCceSZj.js";import{_ as E}from"./BLRN7I0I.js";import{D as A,d as T,o as u,m as j,v as o,h as t,w as y,i as k,b as n,I as M,u as q,E as O,G as R,g as w,H as W,t as F,j as D,S as X,X as I,az as Y,aA as G,e as J,k as Z}from"./C1Qq1QLd.js";import{_ as K}from"./Ck_z0UYv.js";import{_ as Q}from"./BIeMSIdP.js";import{_ as ee}from"./DnmWVJMN.js";import{_ as te}from"./DUKCyIjY.js";import oe from"./Dts3F0k1.js";import{_ as ae}from"./BrqazIaq.js";import{_ as ne}from"./yIDA3Pbn.js";import{_ as ie}from"./0VR8Jqnb.js";import{w as L,u as P}from"./CDSSNFII.js";import"./nG6B8Cf1.js";import"./DKF2w7xO.js";import"./X2QR9rfB.js";import"./BWVliGJj.js";import"./DlAUqK2U.js";import"./DWctDv8V.js";import"./dCmjBx8L.js";import"./KCR-tHi3.js";import"./DwYUTqBu.js";import"./BsD3NFIs.js";import"./jXwMPzuP.js";import"./BV9iaqG7.js";import"./CpCwbx_N.js";import"./DjzIXU8w.js";import"./DwdgSWLY.js";import"./DnFU_lOv.js";import"./BAzV2P3u.js";import"./kJgbbY6C.js";import"./BfNv8Klg.js";import"./D3QtpRVU.js";import"./Cl3ZEGEj.js";import"./D5hYVxtM.js";import"./BK4Bl150.js";import"./COtxFzAH.js";import"./CYRz50eo.js";const S=A(!1);function se(){return{showSidebar:S,toggleSidebar:()=>{S.value=!S.value}}}const re={class:"w-full space-y-4 md:flex md:items-center md:space-x-6 md:space-y-0"},le={class:"flex items-center bg-gray-800 rounded-lg md:justify-between md:flex-1"},ce={class:"px-4 py-3"},me={class:"flex items-center justify-end flex-shrink-0 p-2 space-x-2"},_e={class:"hidden gap-2 md:flex"},pe=T({__name:"Header",props:{title:{},organization:{}},setup($){const{showSidebar:s,toggleSidebar:f}=se();return(e,_)=>{const a=H,c=N,g=U,p=E;return u(),j("header",re,[o("div",le,[o("div",ce,[t(a,{class:"h-6 text-white"})]),t(c,{size:"xs",content:`Proposal for ${e.organization}`,class:"text-white"},null,8,["content"]),o("div",me,[t(g,{class:"hidden text-gray-200 md:block hover:text-gray-400"})])]),o("div",_e,[t(p,{color:"primary",size:"lg",onClick:_[0]||(_[0]=x=>("navigateTo"in e?e.navigateTo:n(M))("#accept"))},{default:y(()=>[k("Accept Proposal")]),_:1}),t(p,{variant:"outline",class:"uppercase",icon:"i-heroicons-chat-bubble-bottom-center-text",onClick:n(f)},null,8,["onClick"])])])}}}),de={class:"relative flex items-center justify-center w-full h-screen border-b-2 border-primary"},ue=o("div",{class:"absolute inset-0 bg-gradient-to-br from-white via-gray-300 to-primary/70 dark:from-gray-800 dark:via-gray-900 dark:to-gray-600"},null,-1),fe=o("div",{class:"absolute inset-0 opacity-50 grain-bg dark:opacity-10"},null,-1),ge={class:"relative flex flex-col justify-center"},he={class:"mt-12 space-y-6 text-center"},be={class:"flex flex-col items-center justify-center space-y-2"},ye={class:"flex flex-col items-center justify-center space-y-2"},ve=T({__name:"Hero",props:{name:{},organization:{},owner:{}},setup($){return(s,f)=>{const e=H,_=N,a=K,c=Q,g=E,p=ee;return u(),j("div",de,[ue,fe,o("div",ge,[t(e,{class:"h-6 mx-auto dark:text-white text-gray"}),o("div",he,[t(_,{content:s.name,size:"title"},null,8,["content"]),o("div",be,[t(a,null,{default:y(()=>[k("For:")]),_:1}),t(_,{content:s.organization},null,8,["content"])]),t(c),o("div",ye,[t(a,null,{default:y(()=>[k("Prepared by:")]),_:1})])]),t(p,{to:"#content",class:"mx-auto"},{default:y(()=>[t(g,{icon:"material-symbols:arrow-downward-rounded",class:"mt-12 animate-bounce",size:"xl"})]),_:1})])])}}}),xe={class:"relative max-w-3xl p-8 mx-auto overflow-hidden text-gray-900 bg-transparent bg-gray-100 border-2 dark:bg-gray-800 border-primary rounded-xl"},we={class:"space-y-2 text-center"},ke={class:"px-3 py-4 rounded-lg bg-primary"},$e=o("p",{class:"dark:text-gray-200"},"To accept this document, fill out the form and click the button below.",-1),ze={class:"mt-8"},De={class:"mb-4"},Pe=T({__name:"Acceptance",async setup($){let s,f;const{query:e,params:_}=q();if(e&&e.approver){const i=([s,f]=L(()=>P(I("contacts",e.approver,{fields:["first_name","last_name","email"]}))),s=await s,f(),s);e.first_name=i.first_name,e.last_name=i.last_name,e.email=i.email}function a(i){const r={};return Object.keys(i).forEach(l=>{if(l.startsWith("prefill_")){const d=l.replace("prefill_","");r[d]=i[l]}}),r}const c=O({...a(e)}),g=A(null),p=A(!1),x={submit_label:"Accept Proposal",success_message:"Success! Your form has been submitted.",size:"lg",schema:[{name:"first_name",type:"text",label:"First Name",placeholder:"John",description:null,validation:"required",width:"50"},{name:"last_name",type:"text",label:"Last Name",validation:"required",width:"50"},{name:"email",type:"text",label:"Email",placeholder:"john@example.com",validation:"required",width:"100"},{name:"organization",type:"text",label:"Company",description:"What's the name of your company / organization?",width:"100"},{name:"signature",type:"signature",label:"Signature",description:"Please sign your name.",width:"100",validation:"required",options:["type","draw","upload"]},{name:"esignature_agreement",type:"checkbox",label:"I agree that my electronic signature is as valid and legally binding as a handwritten signature.",validation:"required",width:"100"}]};function B(i){const r=new FormData;return i.forEach((l,d)=>{r.append("file",l)}),P(G(r))}async function C(){var i,r,l;try{const{signature:d,...h}=c;let m={};const b=(i=c.signature)==null?void 0:i.image;if(b){const v=await B([b]);m.signature_image=v.id}m.signature_type=(r=c.signature)==null?void 0:r.type,m.signature_text=(l=c.signature)==null?void 0:l.text,m={...m,...h,contact:(e==null?void 0:e.approver)??void 0,proposal:_.id??void 0},await P(Y("os_proposal_approvals",m)),p.value=!0}catch{}}return(i,r)=>{const l=oe,d=N,h=ae,m=ne,b=ie,v=R("auto-animate");return u(),w(b,null,{default:y(()=>[o("div",xe,[o("div",we,[o("span",ke,[t(l,{name:"solar:check-read-outline",class:"w-12 h-12 text-white"})]),t(d,{content:"Accept Proposal"}),$e]),o("div",ze,[W((u(),j("div",null,[o("div",De,[n(g)?(u(),w(h,{key:0,type:"error"},{default:y(()=>[k("Oops! "+F(n(g)),1)]),_:1})):D("",!0),n(p)?(u(),w(h,{key:1,type:"success"},{default:y(()=>[k(F(x.success_message||"Success! Your form has been submitted."),1)]),_:1})):D("",!0)]),n(p)?D("",!0):(u(),w(m,{key:0,modelValue:n(c),"onUpdate:modelValue":r[0]||(r[0]=z=>X(c)?c.value=z:null),form:{schema:x.schema},type:"form","on-submit":C,"submit-label":x.submit_label},null,8,["modelValue","form","submit-label"]))])),[[v]])])])]),_:1})}}}),Te={class:""},je={class:"overflow-y-auto"},ft=T({__name:"[id]",async setup($){let s,f;const{params:e,path:_}=q(),{data:a,pending:c,error:g}=([s,f]=L(()=>Z(_,()=>P(I("os_proposals",e.id,{fields:["name",{organization:["name","logo","brand_color"],owner:["first_name","last_name","avatar","title"],blocks:["collection",{item:{block_hero:["id","title","headline","content","image","buttons","image_position"],block_faqs:["id","title","faqs","headline","alignment"],block_richtext:["id","title","headline","content","alignment"],block_testimonials:["id","title","headline",{testimonials:[{testimonials_id:["id","title","subtitle","content","company","company_logo",{image:["id","title","description"]}]}]}],block_quote:["id","title","subtitle","content"],block_cta:["id","title","headline","content","buttons"],block_form:["id","title","headline",{form:["*"]}],block_logocloud:["id","title","headline",{logos:["*"]}],block_gallery:["id","title","headline",{gallery_items:[{directus_files_id:["id","title","description"]}]}],block_steps:["id","title","headline","show_step_numbers","alternate_image_position",{steps:["id","title","content","image"]}],block_columns:["id","title","headline",{rows:["title","headline","content","image_position",{image:["id","title","description"]}]}],block_divider:["id","title"],block_team:["*"],block_html:["*"],block_video:["*"],block_cardgroup:["*"]}}]}]})),"$DpEuXZy61k")),s=await s,f(),s);if(!a.value)throw J({statusCode:404,statusMessage:"Page Not Found"});return(p,x)=>{var l,d,h,m,b,v,z,V;const B=pe,C=ve,i=te,r=Pe;return u(),j("div",Te,[t(B,{title:(l=n(a))==null?void 0:l.name,class:"fixed top-0 z-20 flex justify-center w-full p-2",name:(d=n(a))==null?void 0:d.name,organization:(m=(h=n(a))==null?void 0:h.organization)==null?void 0:m.name},null,8,["title","name","organization"]),o("div",je,[t(C,{class:"pt-36",name:(b=n(a))==null?void 0:b.name,owner:(v=n(a))==null?void 0:v.owner,organization:(V=(z=n(a))==null?void 0:z.organization)==null?void 0:V.name},null,8,["name","owner","organization"]),n(a)?(u(),w(i,{key:0,id:"content",page:n(a)},null,8,["page"])):D("",!0),t(r,{id:"accept",class:"max-w-3xl mx-auto"})])])}}});export{ft as default};
