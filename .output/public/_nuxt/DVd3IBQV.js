import{_ as z}from"./BkkHuSuh.js";import{_ as N}from"./DwYUTqBu.js";import{_ as T}from"./BLRN7I0I.js";import{_ as U}from"./BwYgItWI.js";import{_ as I}from"./CswkOXNq.js";import{d as k,D as _,E as L,o as x,m as M,v as m,h as a,w as e,y as V,b as p,i as y,t as g,k as q,l as b,u as A,g as E}from"./C1Qq1QLd.js";import{w as H,u as h}from"./CDSSNFII.js";import{_ as P}from"./Cb2pLvH4.js";import"./BWVliGJj.js";import"./Dts3F0k1.js";import"./DnmWVJMN.js";import"./DlAUqK2U.js";import"./DWctDv8V.js";import"./dCmjBx8L.js";import"./KCR-tHi3.js";import"./BK4Bl150.js";import"./D3QtpRVU.js";import"./BsD3NFIs.js";import"./DKF2w7xO.js";const S={class:""},R={class:"w-full"},F=m("div",{class:"flex items-center justify-between gap-3 py-3 border-b dark:border-gray-700"},null,-1),G=k({__name:"MessageList",props:{projectId:{}},async setup(l){let t,n;const r=l,{data:i,pending:d,error:u}=([t,n]=H(()=>q(`${r.projectId}-conversations`,()=>h(b("conversations",{filter:{_and:[{item:{_eq:r.projectId}}]}})))),t=await t,n(),t),c=[{key:"name",label:"Name"},{key:"status",label:"Status"},{key:"date_created",label:"Date Created"}],f=_(null);async function C(s){const v=await h(b("messages",{sort:["date_created"],fields:["*",{user_created:["id","first_name","last_name","email","avatar"]}],filter:{_and:[{conversation:{_eq:s}}]}}));j.value=v}function w(s){f.value=s,C(s)}const j=_([]);return L({text:""}),_("open"),(s,v)=>{const B=T,$=U,D=I;return x(),M("div",S,[m("div",R,[F,a(D,{columns:c,rows:p(i),"column-attribute":"label"},{"name-data":e(({row:o})=>[m("div",{class:V({"bg-primary-50 dark:bg-primary-900":p(f)===o.id})},[a(B,{variant:"link",onClick:J=>w(o.id)},{default:e(()=>[y(g(o.title),1)]),_:2},1032,["onClick"])],2)]),"status-data":e(({row:o})=>[a($,{class:"capitalize",variant:"subtle"},{default:e(()=>[y(g(o.status),1)]),_:2},1024)]),_:1},8,["rows"])])])}}}),lt=k({__name:"conversations",setup(l){const{params:t}=A();return(n,r)=>{const i=z,d=N,u=G,c=P;return x(),E(c,{class:"mt-6"},{header:e(()=>[a(i,{content:"Conversations",size:"xs"}),a(d,{content:"Let's talk about it. Here you'll find all the conversations with our team regarding your project.",size:"sm"})]),default:e(()=>[a(u,{"project-id":p(t).id},null,8,["project-id"])]),_:1})}}});export{lt as default};
