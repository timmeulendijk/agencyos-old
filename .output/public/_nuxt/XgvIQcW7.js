import{_ as J}from"./BkkHuSuh.js";import{_ as W}from"./BWVliGJj.js";import{_ as Y}from"./DlAUqK2U.js";import{o as s,m as i,v as o,y as w,g as b,j as h,t as p,d as z,F as f,A as k,h as n,D as ee,c as O,w as T,i as R,b as c,u as te,k as se,X as oe}from"./C1Qq1QLd.js";import Z from"./Dts3F0k1.js";import{_ as ne}from"./Cb2pLvH4.js";import{_ as q}from"./DwYUTqBu.js";import{_ as ie}from"./CldTFEN_.js";import{_ as ae}from"./CYRz50eo.js";import{_ as re}from"./DekjeW-g.js";import{_ as le}from"./DX9skQdG.js";import{_ as ce}from"./Ck_z0UYv.js";import{_ as de}from"./BIeMSIdP.js";import{a as E}from"./CGNRextM.js";import{w as me,u as ue}from"./CDSSNFII.js";import{u as _e}from"./BAzV2P3u.js";import"./dCmjBx8L.js";import"./nG6B8Cf1.js";import"./BmwJRmHE.js";import"./D9e1F_hZ.js";import"./DWctDv8V.js";const pe={props:{name:{type:String,default:""},small:{type:Boolean,default:!1},icon:{type:String,default:""},isCurrent:{type:Boolean,default:!1},isComplete:{type:Boolean,default:!1},status:{type:String,default:""}}},he={class:"relative flex items-center justify-center w-24 md:w-full"},ge={class:"flex flex-col items-center px-1 py-3 text-sm font-medium md:px-2 md:py-4"},fe={class:"whitespace-nowrap"},ye={key:0,class:"mt-1 text-xs font-medium text-center text-gray-500 dark:text-gray-300"};function xe($,m,t,g,r,e){const d=W;return s(),i("div",he,[o("div",ge,[o("span",{class:w([{"bg-primary":t.isComplete,"border-primary border-dashed border-2":t.isCurrent,"border-2 border-dashed dark:border-gray-700":!t.isCurrent&&!t.isComplete},"flex items-center justify-center flex-shrink-0 w-10 h-10 rounded-button"])},[t.isComplete?(s(),b(d,{key:0,name:"heroicons:check",class:"w-8 h-8 text-white fill-current",solid:""})):t.icon?(s(),b(d,{key:1,name:t.icon,class:w(["w-6 h-6 fill-current",{"text-primary":t.isCurrent,"text-gray-500 ":!t.isCurrent}]),outline:""},null,8,["name","class"])):h("",!0)],2),o("div",{class:w(["mt-1 text-xs font-medium text-center md:text-sm md:mt-2",{"line-through text-gray-900 dark:text-white":t.isComplete,"text-primary":t.isCurrent,"text-gray-500 dark:text-gray-300":!t.isCurrent&&!t.isComplete}])},[o("span",fe,p(t.name),1)],2),t.status?(s(),i("div",ye,p(t.status),1)):h("",!0)])])}const ve=Y(pe,[["render",xe]]),we={"aria-label":"Progress"},be={class:"flex items-start w-full overflow-x-auto"},Ce={key:0,class:"mt-6 md:mt-8"},ke=z({__name:"ProjectMilestones",props:{steps:{}},setup($){return(m,t)=>{const g=ve,r=Z;return s(),i("nav",we,[o("ol",be,[(s(!0),i(f,null,k(m.steps,(e,d)=>(s(),i("li",{key:d,class:"flex flex-1"},[n(g,{name:e.name,icon:e.icon,"is-complete":e.isComplete,"is-current":e.isCurrent,status:e.status,date:e.date},null,8,["name","icon","is-complete","is-current","status","date"]),d!==m.steps.length-1?(s(),i("div",Ce,[n(r,{name:"i-heroicons-arrow-long-right",class:w([e.isComplete?"text-primary-700 dark:text-primary":"text-gray-700 dark:text-gray-500","w-8 h-8 fill-current"]),solid:""},null,8,["class"])])):h("",!0)]))),128))])])}}}),$e={class:"relative"},Te={class:"flow-root mt-6 space-y-4"},ze={role:"list",class:"mt-4"},je={class:"relative pb-8"},De={key:0,class:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-300 dark:bg-gray-700","aria-hidden":"true"},Pe={class:"relative flex space-x-3"},Ae={class:w(["h-8 w-8 rounded-full flex items-center justify-center bg-gray-500 "])},Be={class:"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5"},Ue=o("div",{class:"font-bold"},"User posted a project update",-1),Se={class:"text-sm text-right text-gray-500 whitespace-nowrap"},Me=z({__name:"ProjectActivity",props:{item:{type:String,default:null},collection:{type:String,default:""}},setup($){const m=ee([{type:"milestone",item:{id:"1",name:"Milestone 1"},action:"completed",timestamp:"2023-09-02T00:00:00.000Z"},{type:"update",item:{id:"1",message:`<p>I am pleased to announce the successful completion of Sprint 3. Kudos to all for the hard work and dedication that was poured into achieving our goals. Below is a brief update on the key accomplishments, upcoming priorities, and identified challenges:</p>
<h3>Key Accomplishments:</h3>
<ol>
<li>
<p><strong>Feature Development</strong>:</p>
<ul>
<li>Completed the User Authentication module which now supports OAuth 2.0.</li>
<li>Implemented real-time notifications, enhancing user engagement.</li>
<li>Optimized the website's load time by 30%, ensuring a smoother user experience.</li>
</ul>
</li>
<li>
<p><strong>Bug Fixes</strong>:</p>
<ul>
<li>Addressed 25 reported bugs, with a significant one being the payment gateway error.</li>
</ul>
</li>
<li>
<p><strong>Testing and Quality Assurance</strong>:</p>
<ul>
<li>Achieved 95% code coverage with automated testing.</li>
<li>Conducted usability testing with a selected user group, feedback has been overwhelmingly positive.</li>
</ul>
</li>
<li>
<p><strong>Collaborations</strong>:</p>
<ul>
<li>Coordinated with the Design team to finalize the UI/UX for the new dashboard.</li>
<li>Established a weekly sync with the Marketing team to align on product messaging.</li>
</ul>
</li>
</ol>`},action:"update",timestamp:"2023-09-01T00:00:00.000Z"},{type:"milestone",item:{id:"1",name:"Milestone 1"},action:"started",timestamp:"2023-09-01T00:00:00.000Z"}]),t=O(()=>m.value.reduce((r,e)=>{const d=new Date(e.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),y=r.find(x=>x.date===d);return y?y.activity.push(e):r.push({date:d,activity:[e]}),r},[]).sort((r,e)=>new Date(e.date).getTime()-new Date(r.date).getTime()));return(g,r)=>{const e=ce,d=de,y=Z,x=q;return s(),i("div",$e,[o("div",Te,[(s(!0),i(f,null,k(c(t),(v,u)=>(s(),i("div",{key:`date-${u}`},[n(e,null,{default:T(()=>[R(p(v.date),1)]),_:2},1024),n(d),o("ul",ze,[(s(!0),i(f,null,k(v.activity,(l,_)=>(s(),i("li",{key:_},[o("div",je,[_!==v.activity.length-1?(s(),i("span",De)):h("",!0),o("div",Pe,[o("div",null,[o("span",Ae,[n(y,{name:l.type==="milestone"?"heroicons:flag":l.type==="update"?"heroicons:document-text":"heroicons:document",class:"w-5 h-5 text-white","aria-hidden":"true"},null,8,["name"])])]),o("div",Be,[o("div",null,[l.type==="update"?(s(),i(f,{key:0},[Ue,l.item&&l.item.message?(s(),b(x,{key:0,content:l.item.message,size:"sm"},null,8,["content"])):h("",!0)],64)):l.type==="milestone"?(s(),i(f,{key:1},[R(" Milestone - "+p(l.item.name)+" - "+p(l.action),1)],64)):h("",!0)]),o("div",Se,p(("getRelativeTime"in g?g.getRelativeTime:c(E))(l.timestamp)),1)])])])]))),128))])]))),128))])])}}}),Ve={id:"overview",class:"grid lg:grid-cols-2"},Fe={class:"px-4 py-3 mt-8 space-y-4"},Ie={class:"grid divide-y-2 md:divide-y-0 md:divide-x-2 md:grid-cols-2 dark:divide-gray-700"},Ne={class:"p-4 space-y-4"},Le=o("p",{class:"text-sm font-bold"},p("Company Name"),-1),Re={class:"p-4 space-y-4"},Oe=["src"],Ze={class:"text-sm font-bold"},qe={class:"px-4 py-3 mt-12 lg:col-span-2"},ut=z({__name:"index",async setup($){let m,t;const{path:g,params:r}=te(),{data:e,pending:d,error:y}=([m,t]=me(()=>se(`/portal/projects/${r.id}-index`,()=>ue(oe("os_projects",r.id,{fields:["*",{organization:["id","name","logo"],owner:["id","first_name","last_name","email","avatar"],contacts:["*"],tasks:["id","name","type","status","due_date","date_completed"],updates:["id","message","user_created","date_created","date_updated","user_updated"]}],deep:{tasks:{_filter:{_or:[{is_visible_to_client:{_eq:!0}},{type:{_eq:"milestone"}}]}}}})))),m=await m,t(),m),{fileUrl:x}=_e(),v=O(()=>{var _;const u=c(e);return!u||!(u!=null&&u.tasks)?[]:((_=u==null?void 0:u.tasks)==null?void 0:_.filter(a=>typeof a!="string"&&a.type==="milestone").sort((a,C)=>new Date(a.due_date).getTime()-new Date(C.due_date).getTime())).map(a=>({isComplete:a.status==="completed",isCurrent:a.status!=="completed"&&a.status!=="pending",icon:"heroicons:calendar",name:a.name,status:a.status==="completed"?a.date_completed&&E(a.date_completed):"",date:a.due_date}))});return(u,l)=>{var D,P;const _=J,a=ke,C=ne,K=q,X=ie,j=ae,H=re,Q=le,G=Me;return s(),i("div",Ve,[n(C,{class:"mt-6 space-y-4 lg:col-span-2"},{default:T(()=>[n(_,{content:"Milestones",size:"xs"}),n(a,{steps:c(v)},null,8,["steps"])]),_:1}),o("section",Fe,[n(_,{content:"Description",size:"xs"}),(D=c(e))!=null&&D.description?(s(),b(K,{key:0,content:(P=c(e))==null?void 0:P.description},null,8,["content"])):h("",!0)]),n(C,{class:"mt-8"},{default:T(()=>{var A,B,U,S,M,V,F,I;return[n(_,{content:"Team",size:"xs"}),o("div",Ie,[o("div",Ne,[n(X,{class:"h-6"}),Le,n(j,{label:"Project Owner"}),n(H,{author:(A=c(e))==null?void 0:A.owner,size:"sm"},null,8,["author"])]),o("div",Re,[(U=(B=c(e))==null?void 0:B.organization)!=null&&U.logo?(s(),i("img",{key:0,src:c(x)((M=(S=c(e))==null?void 0:S.organization)==null?void 0:M.logo),class:"h-6"},null,8,Oe)):h("",!0),o("p",Ze,p((F=(V=c(e))==null?void 0:V.organization)==null?void 0:F.name),1),n(j,{label:"Contacts"}),(s(!0),i(f,null,k((I=c(e))==null?void 0:I.contacts,N=>{var L;return s(),b(Q,{key:(L=N.contacts_id)==null?void 0:L.id,user:N.contacts_id,size:"sm"},null,8,["user"])}),128))])])]}),_:1}),o("div",qe,[n(_,{content:"Updates",size:"xs"}),n(G)])])}}});export{ut as default};
