import{_ as se}from"./D_yz1VK7.js";import{_ as ae}from"./wi-U1sct.js";import{_ as ie}from"./BLRN7I0I.js";import{_ as re}from"./BWVliGJj.js";import{_ as le}from"./CfNxAj-D.js";import{_ as de}from"./BkkHuSuh.js";import{_ as ce}from"./BwYgItWI.js";import{_ as me}from"./BIeMSIdP.js";import{_ as _e}from"./CldTFEN_.js";import{_ as ue}from"./DX9skQdG.js";import{_ as pe}from"./CswkOXNq.js";import{u as fe}from"./CE-_QWdS.js";import{d as ye,u as ge,a as be,c as X,o as u,m as p,h as o,w as a,b as e,i as d,j as f,g as he,v as i,t as s,k as ve,X as xe}from"./C1Qq1QLd.js";import{w as ke,u as Ce}from"./CDSSNFII.js";import{g as G}from"./CGNRextM.js";import{f as g}from"./sQXfV4VV.js";import"./DnmWVJMN.js";import"./DlAUqK2U.js";import"./DWctDv8V.js";import"./Dts3F0k1.js";import"./dCmjBx8L.js";import"./KCR-tHi3.js";import"./nG6B8Cf1.js";import"./D9e1F_hZ.js";import"./BAzV2P3u.js";import"./BmwJRmHE.js";import"./BK4Bl150.js";import"./D3QtpRVU.js";import"./BsD3NFIs.js";import"./DKF2w7xO.js";import"./Bf5SMuIn.js";function $e(_){if(!_||!_.addresses||!Array.isArray(_.addresses))return null;if(_.addresses.length===1){const l=_.addresses[0];return typeof l=="string"?null:l}for(const l of _.addresses)if(typeof l!="string"&&l.is_primary_billing)return l;return null}function we(_,{subject:l,body:b,cc:h,bcc:v}={}){const C=[l&&`subject=${encodeURIComponent(l)}`,b&&`body=${encodeURIComponent(b)}`,h&&`cc=${encodeURIComponent(h)}`,v&&`bcc=${encodeURIComponent(v)}`].filter(Boolean).join("&");return`mailto:${_}?${C}`}function De(_){const l=_.replace(/\D+/g,"");return l.length>10&&l.startsWith("1")?`tel:+${l}`:`tel:${l}`}const Ie={key:0,class:"flex items-center gap-2"},Be={key:1,class:"inline-flex items-center gap-2 px-4 py-2 border rounded-button border-primary"},Te={class:"relative flex flex-col p-8 mt-8 space-y-8 bg-white border rounded-panel dark:bg-gray-900 dark:border-gray-700"},Ae={class:"relative flex flex-col gap-8 md:justify-between md:flex-row"},Ue={id:"invoice-details",class:"space-y-1"},je={class:"inline-flex"},Pe={id:"company-branding",class:"space-y-1.5"},ze={key:0},Re={key:1},Ve={key:2},Fe={key:3},Le={id:"bill-to"},Ne={class:"flex flex-col gap-8 mt-4 md:flex-row"},Me={class:"font-bold"},Se={key:0},qe={key:1},He={id:"line-items"},Ee={class:"text-xs"},Qe={id:"totals",class:"md:flex md:justify-end"},We={class:"w-full px-3 py-3 mt-8 border rounded-panel dark:border-gray-700 lg:mt-0 md:max-w-[300px]"},Xe={class:"flex items-baseline justify-between py-1"},Ge={class:"flex items-baseline justify-between py-1"},Je={class:"flex items-baseline justify-between py-2"},Ke={class:"flex items-baseline justify-between py-1"},At=ye({__name:"[id]",async setup(_){let l,b;const{handleCheckout:h,loading:v}=fe(),{path:C,params:J}=ge(),{globals:c}=be(),{data:r,pending:Oe,error:Ye}=([l,b]=ke(()=>ve(C,()=>Ce(xe("os_invoices",J.id,{fields:["*",{contact:["id","first_name","last_name","email","phone"],line_items:["id","line_item_number","item_name","quantity","unit_price","description","line_amount","tax_amount",{item:["id","name","description"]},{tax_rate:["id","name","rate"]}],organization:["id","name","logo",{addresses:["*"]}],payments:["*"]}]})),{})),l=await l,b(),l),K=[{key:"line_item_number",label:"Line #"},{key:"item_name",label:"Item"},{key:"quantity",label:"Quantity"},{key:"unit_price",label:"Unit Price"},{key:"line_amount",label:"Line Amount"},{key:"tax_amount",label:"Tax Amount"}],x=X(()=>{var n;return((n=e(r))==null?void 0:n.status)==="paid"}),y=X(()=>{var n;return $e((n=e(r))==null?void 0:n.organization)});return(n,D)=>{var I,B,T,A,U,j,P,z,R,V,F,L,N,M,S,q,H,E,Q;const m=se,O=ae,$=ie,Y=re,Z=le,w=de,ee=ce,k=me,te=_e,oe=ue,ne=pe;return u(),p("div",null,[o(Z,{title:`Invoice #${(I=e(r))==null?void 0:I.invoice_number}`,breadcrumbs:[{title:"Portal",href:"/portal"},{title:"Billing",href:"/portal/billing"},{title:"Invoices",href:"/portal/billing/invoices"}]},{center:a(()=>{var t;return[e(x)?f("",!0):(u(),p("div",Ie,[o(m,{class:"font-semibold"},{default:a(()=>[d("Due Date")]),_:1}),o(O,{date:(t=e(r))==null?void 0:t.due_date,size:"xs"},null,8,["date"])]))]}),actions:a(()=>[e(x)?f("",!0):(u(),he($,{key:0,color:"primary",size:"xl",loading:e(v),onClick:D[0]||(D[0]=t=>{var W;return e(h)((W=e(r))==null?void 0:W.id)})},{default:a(()=>[d(" Pay Invoice ")]),_:1},8,["loading"])),e(x)?(u(),p("div",Be,[o(Y,{name:"material-symbols:price-check-rounded",class:"w-8 h-8 text-primary"}),o(m,{size:"lg",class:"font-bold uppercase font-display"},{default:a(()=>[d("Paid")]),_:1})])):f("",!0)]),_:1},8,["title"]),i("main",Te,[i("section",Ae,[i("div",Ue,[i("div",je,[o(w,{content:`Invoice #${(B=e(r))==null?void 0:B.invoice_number}`,size:"xs"},null,8,["content"]),o(ee,{color:e(x)?"primary":"rose",class:"ml-2 capitalize"},{default:a(()=>{var t;return[d(s((t=e(r))==null?void 0:t.status),1)]}),_:1},8,["color"])]),o(m,{"text-color":"light"},{default:a(()=>{var t;return[d("Reference: "+s((t=e(r))==null?void 0:t.reference),1)]}),_:1}),o(k),o(m,{"text-color":"light"},{default:a(()=>{var t;return[d("Issued on "+s(("getFriendlyDate"in n?n.getFriendlyDate:e(G))((t=e(r))==null?void 0:t.issue_date)),1)]}),_:1}),o(m,{class:"font-bold"},{default:a(()=>{var t;return[d("Due on "+s(("getFriendlyDate"in n?n.getFriendlyDate:e(G))((t=e(r))==null?void 0:t.due_date)),1)]}),_:1})]),i("div",Pe,[o(te,{class:"w-32"}),(T=e(c))!=null&&T.street_address?(u(),p("p",ze,s(e(c).street_address),1)):f("",!0),(A=e(c))!=null&&A.address_locality||(U=e(c))!=null&&U.address_region||(j=e(c))!=null&&j.postal_code?(u(),p("p",Re,s(e(c).address_locality)+", "+s(e(c).address_region)+" "+s(e(c).postal_code),1)):f("",!0),(P=e(c))!=null&&P.phone?(u(),p("p",Ve,[o($,{to:("createTel"in n?n.createTel:e(De))(e(c).phone),color:"gray",variant:"link",padded:!1,icon:"material-symbols:phone-android-outline-rounded"},{default:a(()=>[d(s(e(c).phone),1)]),_:1},8,["to"])])):f("",!0),(z=e(c))!=null&&z.email?(u(),p("p",Fe,[o($,{to:("createMailto"in n?n.createMailto:e(we))(e(c).email,{subject:`Invoice #${(R=e(r))==null?void 0:R.invoice_number}`}),color:"gray",variant:"link",padded:!1,icon:"material-symbols:alternate-email-rounded"},{default:a(()=>[d(s(e(c).email),1)]),_:1},8,["to"])])):f("",!0)])]),i("section",Le,[o(w,{content:"Bill To",size:"xs"}),o(k),i("div",Ne,[i("div",null,[i("p",Me,s((F=(V=e(r))==null?void 0:V.organization)==null?void 0:F.name),1),(L=e(y))!=null&&L.street_address?(u(),p("p",Se,s(e(y).street_address),1)):f("",!0),(N=e(y))!=null&&N.address_locality||(M=e(y))!=null&&M.address_region||(S=e(y))!=null&&S.postal_code?(u(),p("p",qe,s(e(y).address_locality)+", "+s(e(y).address_region)+" "+s(e(y).postal_code),1)):f("",!0)]),i("div",null,[o(oe,{user:(q=e(r))==null?void 0:q.contact,size:"sm"},null,8,["user"]),i("p",null,s((H=e(r))==null?void 0:H.contact.email),1),i("p",null,s((E=e(r))==null?void 0:E.contact.phone),1)])])]),i("section",He,[o(w,{content:"Line Items",size:"xs"}),o(k),o(ne,{columns:K,rows:(Q=e(r))==null?void 0:Q.line_items},{"unit_price-data":a(({row:t})=>[d(s(("formatCurrency"in n?n.formatCurrency:e(g))(t.unit_price)),1)]),"line_amount-data":a(({row:t})=>[d(s(("formatCurrency"in n?n.formatCurrency:e(g))(t.line_amount)),1)]),"tax_amount-data":a(({row:t})=>[i("p",null,s(("formatCurrency"in n?n.formatCurrency:e(g))(t.tax_amount)),1),i("p",Ee,s(t.tax_rate.name),1)]),_:1},8,["rows"])]),i("section",Qe,[i("div",We,[i("div",Xe,[o(m,{"text-color":"light"},{default:a(()=>[d("Subtotal")]),_:1}),o(m,null,{default:a(()=>{var t;return[d(s(("formatCurrency"in n?n.formatCurrency:e(g))((t=e(r))==null?void 0:t.subtotal)),1)]}),_:1})]),i("div",Ge,[o(m,{"text-color":"light"},{default:a(()=>[d("Taxes")]),_:1}),o(m,null,{default:a(()=>{var t;return[d(s(("formatCurrency"in n?n.formatCurrency:e(g))((t=e(r))==null?void 0:t.total_tax)),1)]}),_:1})]),o(k),i("div",Je,[o(m,{class:"font-bold"},{default:a(()=>[d("Total")]),_:1}),o(m,{class:"text-xl font-bold text-primary-600"},{default:a(()=>{var t;return[d(s(("formatCurrency"in n?n.formatCurrency:e(g))((t=e(r))==null?void 0:t.total)),1)]}),_:1})]),i("div",Ke,[o(m,{"text-color":"light"},{default:a(()=>[d("Amount Due")]),_:1}),o(m,{class:"font-medium text-center"},{default:a(()=>{var t;return[d(s(("formatCurrency"in n?n.formatCurrency:e(g))((t=e(r))==null?void 0:t.amount_due)),1)]}),_:1})])])])])])}}});export{At as default};
