import{_ as ne}from"./DnmWVJMN.js";import{_ as re}from"./CldTFEN_.js";import{_ as E}from"./BWVliGJj.js";import{_ as se}from"./CzCceSZj.js";import{_ as G}from"./D9e1F_hZ.js";import{_ as le}from"./BMcm88wx.js";import ie from"./Dts3F0k1.js";import{_ as ce}from"./BrqazIaq.js";import{d as L,c as j,D as $,o as l,m as v,h as i,b as m,I as S,J as ue,n as H,p as T,q as J,r as I,s as D,K as de,L as pe,M as fe,g as x,w as g,v as a,z as C,y,j as k,x as R,i as F,t as A,F as M,A as B,B as O,N as me,T as ge,O as ye,P as he,Q as ve,R as _e,C as be,S as we,U as ke,_ as xe}from"./C1Qq1QLd.js";import{_ as Ce}from"./BqpRQLav.js";import{_ as $e,d as Se}from"./BPBXaj21.js";import{_ as Ae}from"./DbJPzKJT.js";import{_ as q}from"./BLRN7I0I.js";import{U as je}from"./DWctDv8V.js";import{u as K}from"./dCmjBx8L.js";import{_ as Q}from"./DlAUqK2U.js";import{u as Be}from"./Bf5SMuIn.js";import{u as Ue}from"./BmwJRmHE.js";import{Y as Me,G as Ne}from"./Ba5XwZFk.js";import{h as V,S as Pe}from"./DnFU_lOv.js";import"./nG6B8Cf1.js";import"./DKF2w7xO.js";import"./X2QR9rfB.js";import"./BsD3NFIs.js";import"./jXwMPzuP.js";import"./DQ9UKlTQ.js";import"./BV9iaqG7.js";import"./BF1h8QGO.js";import"./KCR-tHi3.js";function Te(e){return{}}const ze={wrapper:"w-full pointer-events-auto",container:"relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium text-gray-900 dark:text-white",description:"mt-1 text-sm leading-4 text-gray-500 dark:text-gray-400",actions:"flex items-center gap-2 mt-3 flex-shrink-0",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",ring:"ring-1 ring-gray-200 dark:ring-gray-800",icon:{base:"flex-shrink-0 w-5 h-5",color:"text-{color}-500 dark:text-{color}-400"},avatar:{base:"flex-shrink-0 self-center",size:"md"},progress:{base:"absolute bottom-0 end-0 start-0 h-1",background:"bg-{color}-500 dark:bg-{color}-400"},transition:{enterActiveClass:"transform ease-out duration-300 transition",enterFromClass:"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2",enterToClass:"translate-y-0 opacity-100 sm:translate-x-0",leaveActiveClass:"transition ease-in duration-100",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},default:{color:"primary",icon:null,timeout:5e3,closeButton:{icon:"i-heroicons-x-mark-20-solid",color:"gray",variant:"link",padded:!1},actionButton:{size:"xs",color:"white"}}},De={wrapper:"fixed flex flex-col justify-end z-[55]",position:"bottom-0 end-0",width:"w-full sm:w-96",container:"px-4 sm:px-6 py-6 space-y-3 overflow-y-auto"},Oe=L({__name:"PortalSearch",props:{placeholder:{type:String,default:"Search items"}},emits:["close"],setup(e,{emit:d}){const c=d,p=Te(),s=[{id:"projects",label:"Go to Projects",click:()=>S("/portal/projects")},{id:"files",label:"Go to Files",click:()=>S("/portal/files")},{id:"invoices",label:"Go to Invoices",click:()=>S("/portal/billing/invoices")},{id:"acccount",label:"Go to My Account",click:()=>S("/portal/account")}],_=j(()=>[{key:"search",label:t=>t&&`Results matching “${t}”...`,search:async t=>{if(u.value=!0,!t||t.length<3)return u.value=!1,[];try{const{data:b}=await $fetch("/api/portal/search",{params:{search:t,collections:["os_projects","os_tasks","os_invoices","help_articles"]},headers:p});return b.map(h=>({id:h.id,label:h.title,href:h.url,suffix:h.type}))}catch{}finally{u.value=!1}}},{key:"actions",commands:s}].filter(Boolean));function w(t){t.click?t.click():t.to?S(t.to):t.href&&S(t.href),c("close")}const n=$(null);$(""),$([]),$(null);const u=$(!1),r={wrapper:"flex flex-col flex-1 min-h-0 bg-gray-50 dark:bg-gray-800",input:{wrapper:"relative flex items-center mx-3 py-3",base:"w-full rounded border-2 border-primary-500 placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-0 bg-white dark:bg-gray-900",padding:"px-4",height:"h-14",size:"text-lg",icon:{base:"pointer-events-none absolute left-3 text-primary-500 dark:text-primary-400",size:"h-6 w-6"}},group:{wrapper:"p-3 relative",label:"-mx-3 px-3 -mt-4 mb-2 py-1 text-sm font-semibold text-primary-500 dark:text-primary-400 font-semibold sticky top-0 bg-gray-50 dark:bg-gray-800 z-10",container:"space-y-1",command:{base:"flex justify-between select-none items-center rounded px-2 py-4 gap-2 relative font-medium text-sm group shadow",active:"bg-primary-500 dark:bg-primary-400 text-white",inactive:"bg-white dark:bg-gray-900",label:"flex min-w-0 justify-between",suffix:"text-xs",icon:{base:"flex-shrink-0 w-6 h-6",active:"text-white",inactive:"text-gray-400 dark:text-gray-500"}}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 py-9",label:"text-sm text-center text-gray-500 dark:text-gray-400",queryLabel:"text-lg text-center text-gray-900 dark:text-white",icon:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-4"}};return(t,b)=>{const h=$e;return l(),v("div",null,[i(h,{ref_key:"commandPaletteRef",ref:n,loading:m(u),groups:m(_),ui:r,"onUpdate:modelValue":w},null,8,["loading","groups"])])}}});function Ve(e,d,c){let p=null;const{pause:s,resume:_,timestamp:w}=ue({controls:!0}),n=$(null),u=j(()=>n.value?d-(w.value-n.value):0);function r(...f){p=setTimeout(()=>{p=null,n.value=null,e(...f)},u.value)}function t(){p&&(clearTimeout(p),p=null)}function b(){n.value=Date.now(),r()}function h(){t(),s()}function N(){t(),s()}function U(){r(),_(),n.value=(n.value||0)+(Date.now()-w.value)}return b(),{start:b,stop:h,pause:N,resume:U,remaining:u}}const P=H(T.ui.strategy,T.ui.notification,ze),Ie=L({components:{UIcon:je,UAvatar:G,UButton:q},inheritAttrs:!1,props:{id:{type:[String,Number],required:!0},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>P.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>P.default.closeButton},timeout:{type:Number,default:()=>P.default.timeout},actions:{type:Array,default:()=>[]},callback:{type:Function,default:null},color:{type:String,default:()=>P.default.color,validator(e){return["gray",...T.ui.colors].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:d}){const{ui:c,attrs:p}=K("notification",J(e,"ui"),P);let s=null;const _=$(e.timeout),w=j(()=>{var f,z;return I(D(c.value.wrapper,(f=c.value.background)==null?void 0:f.replaceAll("{color}",e.color),c.value.rounded,c.value.shadow,(z=c.value.ring)==null?void 0:z.replaceAll("{color}",e.color)),e.class)}),n=j(()=>{var f;return D(c.value.progress.base,(f=c.value.progress.background)==null?void 0:f.replaceAll("{color}",e.color))}),u=j(()=>({width:`${_.value/e.timeout*100||0}%`})),r=j(()=>{var f;return D(c.value.icon.base,(f=c.value.icon.color)==null?void 0:f.replaceAll("{color}",e.color))});function t(){s&&s.pause()}function b(){s&&s.resume()}function h(){s&&s.stop(),e.callback&&e.callback(),d("close")}function N(f){s&&s.stop(),f.click&&f.click(),d("close")}function U(){s&&s.stop(),e.timeout&&(s=Ve(()=>{h()},e.timeout),ye(()=>{_.value=s.remaining.value}))}return de(()=>e.timeout,U),pe(U),fe(()=>{s&&s.stop()}),{ui:c,attrs:p,wrapperClass:w,progressClass:n,progressStyle:u,iconClass:r,onMouseover:t,onMouseleave:b,onClose:h,onAction:N,twMerge:I}}});function Re(e,d,c,p,s,_){const w=E,n=G,u=q;return l(),x(ge,C({appear:""},e.ui.transition),{default:g(()=>[a("div",C({class:e.wrapperClass,role:"status"},e.attrs,{onMouseover:d[0]||(d[0]=(...r)=>e.onMouseover&&e.onMouseover(...r)),onMouseleave:d[1]||(d[1]=(...r)=>e.onMouseleave&&e.onMouseleave(...r))}),[a("div",{class:y([e.ui.container,e.ui.rounded,e.ui.ring])},[a("div",{class:y(["flex",[e.ui.padding,e.ui.gap,{"items-start":e.description||e.$slots.description,"items-center":!e.description&&!e.$slots.description}]])},[e.icon?(l(),x(w,{key:0,name:e.icon,class:y(e.iconClass)},null,8,["name","class"])):k("",!0),e.avatar?(l(),x(n,C({key:1},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):k("",!0),a("div",{class:y(e.ui.inner)},[e.title||e.$slots.title?(l(),v("p",{key:0,class:y(e.ui.title)},[R(e.$slots,"title",{title:e.title},()=>[F(A(e.title),1)])],2)):k("",!0),e.description||e.$slots.description?(l(),v("div",{key:1,class:y(e.twMerge(e.ui.description,!e.title&&!e.$slots.title&&"mt-0 leading-5"))},[R(e.$slots,"description",{description:e.description},()=>[F(A(e.description),1)])],2)):k("",!0),(e.description||e.$slots.description)&&e.actions.length?(l(),v("div",{key:2,class:y(e.ui.actions)},[(l(!0),v(M,null,B(e.actions,(r,t)=>(l(),x(u,C({key:t,ref_for:!0},{...e.ui.default.actionButton||{},...r},{onClick:O(b=>e.onAction(r),["stop"])}),null,16,["onClick"]))),128))],2)):k("",!0)],2),e.closeButton||!e.description&&!e.$slots.description&&e.actions.length?(l(),v("div",{key:2,class:y(e.twMerge(e.ui.actions,"mt-0"))},[!e.description&&!e.$slots.description&&e.actions.length?(l(!0),v(M,{key:0},B(e.actions,(r,t)=>(l(),x(u,C({key:t,ref_for:!0},{...e.ui.default.actionButton||{},...r},{onClick:O(b=>e.onAction(r),["stop"])}),null,16,["onClick"]))),128)):k("",!0),e.closeButton?(l(),x(u,C({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{onClick:O(e.onClose,["stop"])}),null,16,["onClick"])):k("",!0)],2)):k("",!0)],2),e.timeout?(l(),v("div",{key:0,class:y(e.progressClass),style:me(e.progressStyle)},null,6)):k("",!0)],2)],16)]),_:3},16)}const W=Q(Ie,[["render",Re]]),Fe=H(T.ui.strategy,T.ui.notifications,De),Ge=L({components:{UNotification:W},inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:d,attrs:c}=K("notifications",J(e,"ui"),Fe),p=Be(),s=he("notifications",()=>[]),_=j(()=>I(D(d.value.wrapper,d.value.position,d.value.width),e.class));return{ui:d,attrs:c,toast:p,notifications:s,wrapperClass:_}}});function Le(e,d,c,p,s,_){const w=W;return l(),x(_e,{to:"body"},[a("div",C({class:e.wrapperClass,role:"region"},e.attrs),[e.notifications.length?(l(),v("div",{key:0,class:y(e.ui.container)},[(l(!0),v(M,null,B(e.notifications,n=>(l(),v("div",{key:n.id},[i(w,C({ref_for:!0},n,{class:n.click&&"cursor-pointer",onClick:u=>n.click&&n.click(n),onClose:u=>e.toast.remove(n.id)}),ve({_:2},[B(e.$slots,(u,r)=>({name:r,fn:g(t=>[R(e.$slots,r,C({ref_for:!0},t))])}))]),1040,["class","onClick","onClose"])]))),128))],2)):k("",!0)],16)])}const Ye=Q(Ge,[["render",Le]]),Ee={class:"flex h-full transition duration-150 bg-gray-100 dark:bg-gray-950"},He={class:"hidden p-3 md:block"},Je={class:"w-24 h-full bg-gray-900 rounded-panel"},qe={class:"flex flex-col items-center w-full h-full py-6"},Ke={class:"flex items-center flex-shrink-0"},Qe={class:"flex flex-col justify-between flex-1 h-full gap-y-4"},We={class:"w-full px-2 mt-6 space-y-1"},Xe={class:"mt-2"},Ze={class:"flex flex-col items-center justify-center w-full px-2 space-y-2"},et={class:"mt-2"},tt=a("span",{class:"sr-only"},"Open user menu",-1),ot=a("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75"},null,-1),at={class:"fixed inset-0 z-40 flex"},nt={class:"absolute right-0 p-1 top-1 -mr-14"},rt=a("span",{class:"sr-only"},"Close sidebar",-1),st={class:"flex items-center flex-shrink-0 px-4"},lt={class:"flex-1 h-0 px-2 mt-5 overflow-y-auto"},it={class:"flex flex-col h-full"},ct={class:"space-y-1"},ut=a("div",{class:"flex-shrink-0 w-14","aria-hidden":"true"},null,-1),dt={class:"flex flex-col flex-1 overflow-y-auto"},pt=["onClick"],ft={class:"w-full max-w-5xl p-4 mx-auto"},Lt={__name:"portal",setup(e){const{logout:d,user:c}=be(),p=ne;function s(){const r=$(!1);return Se({meta_k:{usingInput:!0,handler:()=>{r.value=!r.value}}}),{showCommandPalette:r}}const _={top:[{name:"Search",click:()=>n.value=!0,icon:"material-symbols:search-rounded"},{name:"Dashboard",href:"/portal",icon:"material-symbols:home-outline-rounded"},{name:"Projects",href:"/portal/projects",icon:"material-symbols:tab-group-outline-rounded"},{name:"Files",href:"/portal/files",icon:"material-symbols:folder-outline-rounded"},{name:"Billing",href:"/portal/billing",icon:"material-symbols:attach-money-rounded"},{name:"Account",href:"/portal/account",icon:"material-symbols:account-circle-outline"}],bottom:[{name:"Help",href:"/portal/help",icon:"material-symbols:help-outline-rounded"}]},w=[[{label:"Your Profile",icon:"i-heroicons-user-circle",click:()=>{S("/portal/account#profile")}},{label:"Sign out",icon:"i-heroicons-arrow-left-on-rectangle",click:()=>d()}]],{showCommandPalette:n}=s(),u=$(!1);return(r,t)=>{const b=re,h=E,N=se,U=G,f=le,z=ie,X=ce,Z=xe,ee=Ce,te=Oe,oe=Ae,ae=Ye;return l(),v("div",Ee,[a("div",He,[a("div",Je,[a("div",qe,[a("div",Ke,[i(b,{class:"w-20 text-white",alt:"Your Company"})]),a("div",Qe,[a("div",We,[(l(!0),v(M,null,B(_.top,o=>(l(),x(ke(o.href?m(p):"button"),{key:o.name,href:o.href??void 0,class:y([o.current?"bg-gray-800 text-white":"text-gray-100 hover:bg-gray-800 hover:text-white","group flex w-full flex-col items-center rounded-card py-3 px-2 text-xs font-bold "]),"aria-current":o.current?"page":void 0,onClick:Y=>o.click?o.click():void 0},{default:g(()=>[i(h,{name:o.icon,class:y([o.current?"text-white":"text-gray-300 group-hover:text-white","h-6 w-6"]),"aria-hidden":"true"},null,8,["name","class"]),a("span",Xe,A(o.name),1)]),_:2},1032,["href","class","aria-current","onClick"]))),128))]),a("div",Ze,[(l(!0),v(M,null,B(_.bottom,o=>(l(),x(m(p),{key:o.name,href:o.href,class:y([o.current?"bg-gray-800 text-white":"text-gray-100 hover:bg-gray-800 hover:text-white","group flex w-full flex-col items-center rounded-card py-3 px-2 text-xs font-bold "]),"aria-current":o.current?"page":void 0},{default:g(()=>[i(h,{name:o.icon,class:y([o.current?"text-white":"text-gray-300 group-hover:text-white","h-6 w-6"]),"aria-hidden":"true"},null,8,["name","class"]),a("span",et,A(o.name),1)]),_:2},1032,["href","class","aria-current"]))),128)),i(N,{bg:"dark",class:""}),i(f,{class:"relative",items:w},{default:g(()=>[a("button",null,[tt,i(U,{class:"w-12 h-12 mx-auto",src:m(c).avatar,alt:("userName"in r?r.userName:m(Ue))(m(c))},null,8,["src","alt"])])]),_:1})])])])])]),i(m(Pe),{as:"template",show:m(u)},{default:g(()=>[i(m(Me),{as:"div",class:"relative z-20 md:hidden",onClose:t[1]||(t[1]=o=>u.value=!1)},{default:g(()=>[i(m(V),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:g(()=>[ot]),_:1}),a("div",at,[i(m(V),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:g(()=>[i(m(Ne),{class:"relative flex flex-col flex-1 w-full max-w-xs pt-5 pb-4 bg-gray-700"},{default:g(()=>[i(m(V),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:g(()=>[a("div",nt,[a("button",{type:"button",class:"flex items-center justify-center w-12 h-12 rounded-full focus:outline-none focus:ring-2 focus:ring-white",onClick:t[0]||(t[0]=o=>u.value=!1)},[i(z,{name:"heroicons:x-mark",class:"w-6 h-6 text-white","aria-hidden":"true"}),rt])])]),_:1}),a("div",st,[i(b,{class:"w-auto h-8",alt:"Your Company"})]),a("div",lt,[a("nav",it,[a("div",ct,[(l(!0),v(M,null,B(_.top,o=>(l(),x(m(p),{key:o.name,href:o.href,class:y([o.current?"bg-gray-800 text-white":"text-gray-100 hover:bg-gray-800 hover:text-white","group flex items-center rounded-md py-2 px-3 text-sm font-medium "]),"aria-current":o.current?"page":void 0},{default:g(()=>[i(h,{name:o.icon,class:y([o.current?"text-white":"text-gray-300 group-hover:text-white","mr-3 h-6 w-6"]),"aria-hidden":"true"},null,8,["name","class"]),a("span",null,A(o.name),1)]),_:2},1032,["href","class","aria-current"]))),128))])])])]),_:1})]),_:1}),ut])]),_:1})]),_:1},8,["show"]),a("div",dt,[i(ee,null,{error:g(({error:o,clearError:Y})=>[i(X,{type:"error"},{default:g(()=>[F(A(o),1)]),_:2},1024),a("button",{class:"mt-4 text-sm text-gray-500 underline",onClick:Y},"Try again",8,pt),a("p",null,"An error occurred: "+A(o),1)]),default:g(()=>[a("div",ft,[i(Z)])]),_:1})]),i(oe,{modelValue:m(n),"onUpdate:modelValue":t[3]||(t[3]=o=>we(n)?n.value=o:null)},{default:g(()=>[i(te,{onClose:t[2]||(t[2]=o=>n.value=!1)})]),_:1},8,["modelValue"]),i(ae)])}}};export{Lt as default};
