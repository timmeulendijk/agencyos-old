import{_ as v}from"./DnFU_lOv.js";import{_ as k}from"./BLRN7I0I.js";import{d as w,_ as S}from"./BPBXaj21.js";import{_ as U}from"./DbJPzKJT.js";import{u as V}from"./BAzV2P3u.js";import{d as $,D as l,c as j,o as z,m as B,h as o,w as s,i as u,v as C,b as p,S as N,I as d}from"./C1Qq1QLd.js";const I={class:"flex items-center gap-0.5"},F=$({__name:"GlobalSearch",props:{collections:{type:Array,required:!0,validator:i=>i.every(c=>["posts","pages","categories","projects"].includes(c))},placeholder:{type:String,default:"Search items"}},setup(i){const c=i;w({meta_k:{usingInput:!0,handler:()=>{r.value=!r.value}}});const r=l(!1),{fileUrl:f}=V(),x=j(()=>[{key:"search",label:e=>e&&`Results matching “${e}”...`,search:async e=>{if(n.value=!0,!e||e.length<3)return n.value=!1,[];try{const{data:a}=await $fetch("/api/search",{params:{search:e,collections:c.collections}});return a.map(t=>({id:t.id,label:t.title,href:t.url,avatar:{src:f(t.image)},suffix:t.type}))}catch{}finally{n.value=!1}}}]);function g(e){e.click?e.click():e.to?d(e.to):e.href&&d(e.href)}l(""),l([]),l(null);const n=l(!1),y={wrapper:"flex flex-col flex-1 min-h-0 bg-gray-50 dark:bg-gray-800",input:{wrapper:"relative flex items-center mx-3 py-3",base:"w-full rounded border-2 border-primary-500 placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-0 bg-white dark:bg-gray-900",padding:"px-4",height:"h-14",size:"text-lg",icon:{base:"pointer-events-none absolute left-3 text-primary-500 dark:text-primary-400",size:"h-6 w-6"}},group:{wrapper:"p-3 relative",label:"-mx-3 px-3 -mt-4 mb-2 py-1 text-sm font-semibold text-primary-500 dark:text-primary-400 font-semibold sticky top-0 bg-gray-50 dark:bg-gray-800 z-10",container:"space-y-1",command:{base:"flex justify-between select-none items-center rounded px-2 py-4 gap-2 relative font-medium text-sm group shadow",active:"bg-primary-500 dark:bg-primary-400 text-white",inactive:"bg-white dark:bg-gray-900",label:"flex min-w-0 justify-between",suffix:"text-xs",icon:{base:"flex-shrink-0 w-6 h-6",active:"text-white",inactive:"text-gray-400 dark:text-gray-500"}}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 py-9",label:"text-sm text-center text-gray-500 dark:text-gray-400",queryLabel:"text-lg text-center text-gray-900 dark:text-white",icon:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-4"}};return(e,a)=>{const t=v,_=k,b=S,h=U;return z(),B("div",null,[o(_,{icon:"material-symbols:search-rounded",color:"white",size:"lg",onClick:a[0]||(a[0]=m=>r.value=!0)},{default:s(()=>[u(" Search "),C("div",I,[o(t,null,{default:s(()=>[u("⌘")]),_:1}),o(t,null,{default:s(()=>[u("K")]),_:1})])]),_:1}),o(h,{modelValue:p(r),"onUpdate:modelValue":a[1]||(a[1]=m=>N(r)?r.value=m:null)},{default:s(()=>[o(b,{loading:p(n),groups:p(x),ui:y,"onUpdate:modelValue":g},null,8,["loading","groups"])]),_:1},8,["modelValue"])])}}});export{F as _};
